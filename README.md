# gitlab内网穿透小工具

### 设计缘由
* gitlab旧版本无法关闭新用户注册，且上传功能未做过滤，能随意引入脚本执行指令，包括但不限于挖矿
* gitlab版本过旧，升级难度过大，数据迁移难度也很大
* 前人部署gitlab不规范，对应文件无法找到

故基于最小化改动原有gitlab及对应服务器的一切文件配置，设计该workaround

### 最终目的
* 鉴权gitlab网页端，使无权限用户无法注册新用户，使用上传功能即可
### 原理
主要利用内网穿透方案，在gitlab对应服务器部署client,随意一个服务器部署server;最外层页面新增一层输token权限校验，后续请求不带.git一律进行鉴权操作，鉴权通过则进行tcp内网穿透，错误次数过多直接拦截。